"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9263],{3905:function(e,n,t){t.d(n,{Zo:function(){return u},kt:function(){return h}});var a=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=a.createContext({}),p=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},u=function(e){var n=p(e.components);return a.createElement(s.Provider,{value:n},e.children)},c="mdxType",f={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},d=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),c=p(t),d=r,h=c["".concat(s,".").concat(d)]||c[d]||f[d]||o;return t?a.createElement(h,l(l({ref:n},u),{},{components:t})):a.createElement(h,l({ref:n},u))}));function h(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=t.length,l=new Array(o);l[0]=d;var i={};for(var s in n)hasOwnProperty.call(n,s)&&(i[s]=n[s]);i.originalType=e,i[c]="string"==typeof e?e:r,l[1]=i;for(var p=2;p<o;p++)l[p]=t[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,t)}d.displayName="MDXCreateElement"},5873:function(e,n,t){t.r(n),t.d(n,{assets:function(){return u},contentTitle:function(){return s},default:function(){return h},frontMatter:function(){return i},metadata:function(){return p},toc:function(){return c}});var a=t(7462),r=t(3366),o=(t(7294),t(3905)),l=["components"],i={id:"infer-workflow",title:"Infer workflow"},s=void 0,p={unversionedId:"infer-workflow",id:"infer-workflow",title:"Infer workflow",description:"This page documents several ways of running Infer, that you can adapt to your",source:"@site/docs/01-infer-workflow.md",sourceDirName:".",slug:"/infer-workflow",permalink:"/docs/next/infer-workflow",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{id:"infer-workflow",title:"Infer workflow"},sidebar:"docs",previous:{title:"Hello, World!",permalink:"/docs/next/hello-world"},next:{title:"Analyzing apps or projects",permalink:"/docs/next/analyzing-apps-or-projects"}},u={},c=[{value:"The two phases of an Infer run",id:"the-two-phases-of-an-infer-run",level:2},{value:"1. The capture phase",id:"1-the-capture-phase",level:3},{value:"2. The analysis phase",id:"2-the-analysis-phase",level:3},{value:"Global (default) and differential workflows",id:"global-default-and-differential-workflows",level:2},{value:"Global workflow",id:"global-workflow",level:3},{value:"Differential workflow",id:"differential-workflow",level:3},{value:"Exploring Infer reports",id:"exploring-infer-reports",level:2}],f={toc:c},d="wrapper";function h(e){var n=e.components,t=(0,r.Z)(e,l);return(0,o.kt)(d,(0,a.Z)({},f,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"This page documents several ways of running Infer, that you can adapt to your\nown project."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"tl; dr"),":"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Make sure your project is clean when you first run Infer on it (with\n",(0,o.kt)("inlineCode",{parentName:"li"},"make clean"),", or ",(0,o.kt)("inlineCode",{parentName:"li"},"gradle clean"),", or ...)."),(0,o.kt)("li",{parentName:"ol"},"When running Infer several times in a row, either clean your project as in\nstep 1 in-between Infer runs, or add ",(0,o.kt)("inlineCode",{parentName:"li"},"--reactive")," to the ",(0,o.kt)("inlineCode",{parentName:"li"},"infer")," command."),(0,o.kt)("li",{parentName:"ol"},"These steps are not needed if you are not using an incremental build system,\nfor instance if you are analyzing single files with\n",(0,o.kt)("inlineCode",{parentName:"li"},"infer run -- javac Hello.java"),"."),(0,o.kt)("li",{parentName:"ol"},"After a successful Infer run, you can explore Infer's reports in more details\nby running ",(0,o.kt)("inlineCode",{parentName:"li"},"infer explore")," from the same directory.")),(0,o.kt)("h2",{id:"the-two-phases-of-an-infer-run"},"The two phases of an Infer run"),(0,o.kt)("p",null,"Regardless of the input language (Java, Objective-C, or C), there are two main\nphases in an Infer run:"),(0,o.kt)("h3",{id:"1-the-capture-phase"},"1. The capture phase"),(0,o.kt)("p",null,"Compilation commands are captured by Infer to translate the files to be analyzed\ninto Infer's own internal intermediate language."),(0,o.kt)("p",null,"This translation is similar to compilation, so Infer takes information from the\ncompilation process to perform its own translation. This is why we call infer\nwith a compilation command: ",(0,o.kt)("inlineCode",{parentName:"p"},"infer run -- javac File.java")," or\n",(0,o.kt)("inlineCode",{parentName:"p"},"infer run -- clang -c file.c"),". What happens is that the files get compiled as\nusual, and they also get translated by Infer to be analyzed in the second phase.\nIn particular, if no file gets compiled, also no file will be analyzed."),(0,o.kt)("p",null,"Infer stores the intermediate files in the results directory which by default is\ncreated in the folder where the ",(0,o.kt)("inlineCode",{parentName:"p"},"infer")," command is invoked, and is called\n",(0,o.kt)("inlineCode",{parentName:"p"},"infer-out/"),". You can change the name of the results directory with the option\n",(0,o.kt)("inlineCode",{parentName:"p"},"-o"),", e.g."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"infer run -o /tmp/out -- javac Test.java\n")),(0,o.kt)("p",null,"You can run just the capture phase using the ",(0,o.kt)("inlineCode",{parentName:"p"},"capture")," subcommand instead of the\n",(0,o.kt)("inlineCode",{parentName:"p"},"run")," subcommand:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"infer capture -- javac Test.java\n")),(0,o.kt)("h3",{id:"2-the-analysis-phase"},"2. The analysis phase"),(0,o.kt)("p",null,"In this phase, the files in ",(0,o.kt)("inlineCode",{parentName:"p"},"infer-out/")," are analyzed by Infer. Infer analyzes\neach function and method separately. If Infer encounters an error when analyzing\na method or function, it stops there for that method or function, but will\ncontinue the analysis of other methods and functions. So, a possible workflow\nwould be to run Infer on your code, fix the errors generated, and run it again\nto find possibly more errors or to check that all the errors have been fixed."),(0,o.kt)("p",null,"The errors will be displayed in the standard output and also in a file\n",(0,o.kt)("inlineCode",{parentName:"p"},"infer-out/report.txt"),". We filter the bugs and show the ones that are most\nlikely to be real."),(0,o.kt)("h2",{id:"global-default-and-differential-workflows"},"Global (default) and differential workflows"),(0,o.kt)("p",null,"By default, running Infer will delete the previous ",(0,o.kt)("inlineCode",{parentName:"p"},"infer-out/")," directory if it\nexists. This leads to a ",(0,o.kt)("em",{parentName:"p"},"default")," workflow where the entire project is analyzed\nevery time. Passing ",(0,o.kt)("inlineCode",{parentName:"p"},"--reactive")," (or ",(0,o.kt)("inlineCode",{parentName:"p"},"-r"),") to Infer prevents it from deleting\n",(0,o.kt)("inlineCode",{parentName:"p"},"infer-out/"),", leading to a ",(0,o.kt)("em",{parentName:"p"},"differential")," workflow."),(0,o.kt)("p",null,"There are exceptions to this. In particular, you can run only one of the phases\nabove. For instance, ",(0,o.kt)("inlineCode",{parentName:"p"},"infer run -- javac Hello.java")," is equivalent to running\nthese two commands:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"infer capture -- javac Hello.java\ninfer analyze\n")),(0,o.kt)("p",null,"Notice that the second command does not erase ",(0,o.kt)("inlineCode",{parentName:"p"},"infer-out/"),", as the files it\nneeds to analyze live there!"),(0,o.kt)("p",null,"You can learn more about the subcommands supported by Infer by running\n",(0,o.kt)("inlineCode",{parentName:"p"},"infer --help"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"infer capture --help"),", or more generally\n",(0,o.kt)("inlineCode",{parentName:"p"},"infer <subcommand> --help"),"."),(0,o.kt)("p",null,"Let us highlight when you may need global and differential workflows."),(0,o.kt)("h3",{id:"global-workflow"},"Global workflow"),(0,o.kt)("p",null,"The global workflow is well suited to running Infer on all the files in a\nproject, e.g., for a Gradle-based project that compiles using the ",(0,o.kt)("inlineCode",{parentName:"p"},"gradle build"),"\ncommand:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"infer run -- gradle build\n")),(0,o.kt)("p",null,"In general, running Infer on your project is as simple as running\n",(0,o.kt)("inlineCode",{parentName:"p"},"infer run -- <your build command here>")," where the build command is the one you\nwould normally use to compile your source code."),(0,o.kt)("p",null,"To start a fresh analysis and be sure to analyze all the files in your project,\nyou have to clean the build products, for instance with ",(0,o.kt)("inlineCode",{parentName:"p"},"make clean")," for a\nmake-based project, ",(0,o.kt)("inlineCode",{parentName:"p"},"gradle clean")," for Gradle, etc."),(0,o.kt)("h3",{id:"differential-workflow"},"Differential workflow"),(0,o.kt)("p",null,"Software projects such as mobile apps use ",(0,o.kt)("em",{parentName:"p"},"incremental")," build systems, where\ncode evolves as a sequence of code changes. For these projects, it can often\nmake sense to analyze only the current changes in the project, instead of\nanalyzing the whole project every time. It is possible to analyze only what's\nchanged using Infer's ",(0,o.kt)("em",{parentName:"p"},"reactive mode"),"."),(0,o.kt)("p",null,"Infer should first be run on a ",(0,o.kt)("em",{parentName:"p"},"clean")," version of the project, to capture all\nthe compilation commands in its capture phase."),(0,o.kt)("p",null,"For instance, for a project compiled using Gradle,"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"gradle clean\ninfer capture -- gradle build\n")),(0,o.kt)("p",null,"Note that the above command does not perform an expensive analysis, but captures\nall the compilation commands and stores the results in Infer's internal format."),(0,o.kt)("p",null,"Next, if you change some files in your project, for instance in response to an\nInfer report, or as part of normal development, you can either clean and\nreanalyze the entire project (as in the ",(0,o.kt)("a",{parentName:"p",href:"#Global-workflow"},"global workflow"),"\nabove), or else tell Infer that you are interested in the effects of the code\nchange. The second option can be significantly faster, as only a subset of the\nproject needs to be analyzed: the modified files/procedures and their\ndependencies."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"edit some/File.java\n# make some changes to some/File.java\ninfer run --reactive -- gradle build\n")),(0,o.kt)("p",null,"Note that you can run Infer with the ",(0,o.kt)("inlineCode",{parentName:"p"},"--reactive")," flag the first time around as\nwell."),(0,o.kt)("p",null,"To control the granularity of the changes to be analyzed, it is possible to tell\nInfer to combine several changes into one before the analysis. This is done with\nthe ",(0,o.kt)("inlineCode",{parentName:"p"},"--continue")," option."),(0,o.kt)("p",null,"For example:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"edit some/File1.java\n# make some changes to some/File1.java\ninfer run --reactive -- gradle build\nedit some/File2.java\n# make some changes to some/File2.java\ninfer run --reactive --continue -- gradle build\n")),(0,o.kt)("p",null,"After the first invocation, Infer will analyze the results of the first change.\nAfter the second invocation, Infer will analyze the results of both changes. If\nthe ",(0,o.kt)("inlineCode",{parentName:"p"},"--continue")," option were omitted, it would only analyze the results of the\nsecond change."),(0,o.kt)("p",null,"Finally, it is always possible to perform an analysis of the current changes in\nisolation:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"infer run --reactive --continue -- analyze\n")),(0,o.kt)("p",null,"The list of build systems supported by Infer is detailed in the\n",(0,o.kt)("a",{parentName:"p",href:"analyzing-apps-or-projects"},"next section"),"."),(0,o.kt)("h2",{id:"exploring-infer-reports"},"Exploring Infer reports"),(0,o.kt)("p",null,"You can get more information about the reports generated by Infer by running\n",(0,o.kt)("inlineCode",{parentName:"p"},"infer explore")," in the same directory. For instance"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"infer run -- gradle build\ninfer explore\n")),(0,o.kt)("p",null,"This tool allows you to see error traces leading to each bug reported by Infer,\nwhich can be helpful in tracking down the precise cause of each bug. See the\noutput of ",(0,o.kt)("inlineCode",{parentName:"p"},"infer explore --help")," for more information."))}h.isMDXComponent=!0}}]);